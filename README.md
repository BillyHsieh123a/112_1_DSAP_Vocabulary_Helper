# 英文字彙小幫手

**DSAP期末報告**

**B11705024 謝友毅**

## 情境說明

比利有在手機記事本上作英文筆記的習慣，他會記下單字、解釋和例句，並按照單字的字典順序找尋插入位置，但隨著紀錄的單字越來越多，問題也開始變多：

1. 要尋找新單字的插入位置變得越來越麻煩費時。
2. 偶爾眼花會將新單字插入錯誤的位置，而沒有按照字典順序。
3. 查找已經記錄過的單字實屬不容易。

## 解決方案

比利打算利用上課所學實作「英文字彙小幫手」，協助把先前的筆記整理好，匯入程式中，並使用有效率的資料結構來執行新增單字、刪除單字、查找單字的功能。

## 資料結構

### Trie (字首樹、字典樹)

每個節點都儲存一個字母 (a\~z, A\~Z)，且任一個節點的子孫都有相同的字首。

- **新增時間複雜度**: O(k)
- **刪除時間複雜度**: O(k)
- **查找時間複雜度**: O(k) （k為單字大小）

### Set (集合)

實作通常為紅黑樹。

## 比較

### 時間

- **新增**: Trie 較快，因為不用比較單字字典順序，且字首已存在時會更快，加上不用平衡。
- **刪除**: Trie 較快，因為不用比較單字字典順序，且最好情況可以只將節點取消標示為單字結尾，加上不用平衡。
- **查找**: Trie 較快，因為知道字首不存在時即可結束。

### 空間

Trie 每次新增節點需要 new 出全部字母數量的陣列，因此可能較佔空間。

## 預期結果

1. 資料結構與功能實作
2. 整理先前的筆記或單字庫
3. 匯入整理好的筆記或單字庫
4. 進行個別功能測試以及比較效能指標

## 程式實作

### Trie

#### 節點

- 可支援的字元數量 (a\~z, A\~Z)
- 標記是否為某單字的結尾

#### Trie 功能實作

- **新增單字**: 已經有存在的字母節點時，直接前往，否則新增節點。到達最後一個字母時，將節點標示為單字字尾。
- **查詢單字**: 確認是否有此單字。
- **刪除單字 (快速)**: 如果指向下一個字母節點的指標為 nullptr，代表此單字不存在。到達最後一個字母時，將節點取消標示為單字字尾。
- **刪除單字 (實際)**: 如果傳入之 root 為空，回傳 nullptr。到達最後一個字母時，將節點取消標示為單字字尾，若此節點無子孫，即可刪除此節點。遞迴函式前往下一個字母，若此節點無子孫且不是某單字之字尾，即可刪除此節點。

### 參考資料

- Trie 確認單字是否存在
- Trie 讀檔與建立 Trie (有例句時要再加一個 getline(inputfile, example))
- Trie 查詢單字測試
- Trie 刪除單字測試

### 自訂 Set

- 元素：如此才能夠使用內建函式
- Set 讀檔與建立 Set
- Set 查詢單字測試
- Set 刪除單字測試

### 互動式操作

- 新增單字服務：如果單字已存在，則結束服務。

## 比較效能指標

### 測資說明

- 隨機生成 (8 個字元) [370105 筆]
- 按照順序、全部單字 (模擬之前作好的筆記) [370105 筆]
- 打亂順序、全部單字 (模擬之後加入新單字) [370105 筆]
- 按照順序、短單字 (8 個字元以內) [149188 筆]
- 按照順序、長單字 (9 個字元以上) [220917 筆]

### 測試方式

- 隨機生成單字
- 過濾特定長度的單字
- 選擇想要的單字長度
- 打亂單字順序

### 測試結果

- **新增**: Set > Trie > Trie > Trie > Set
- **查詢**: Trie > Trie > Trie > Trie > Trie
- **刪除 (快速)**: Trie > Trie > Trie > Trie > Trie
- **刪除 (實際)**: Set > Set > Set > Set > Set

## 結果分析

- 測資功能檢討反思
- Trie 的刪除 (實際) 節點時似乎有問題（搞不好這是比 Set 慢的原因？！）
- Set 在刪除測試時一行一行讀取會卡住，所以改成 Trie 和 Set 的刪除測試都隔行讀取
- 記憶體用量沒有測試到
- 提供更多功能，例如字首查詢、最長前綴匹配
- Trie 好像有其他更好的實作方法
- 建立好的 Trie 和 Set 能夠儲存起來以便下次使用
